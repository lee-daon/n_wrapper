<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Gemini 번역</title>
  <style>
    :root { color-scheme: light; }
    * { box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; margin: 0; padding: 16px; width: 360px; background:#f7f8fa; color:#1f2933; }
    h1 { font-size: 16px; margin: 0 0 14px; font-weight: 700; color:#111827; }
    .card { background:#fff; border:1px solid #e5e7eb; border-radius: 10px; padding: 14px; box-shadow: 0 4px 14px rgba(0,0,0,0.06); }
    label { display: block; font-weight: 600; margin-bottom: 6px; color:#111827; }
    input[type="text"], input[type="password"], input[type="file"] { width: 100%; padding: 10px; border-radius: 8px; border:1px solid #d1d5db; background:#f9fafb; font-size: 13px; transition: border-color .15s, box-shadow .15s; }
    input[type="text"]:focus, input[type="password"]:focus, input[type="file"]:focus { outline:none; border-color:#2563eb; box-shadow:0 0 0 3px rgba(37,99,235,0.15); background:#fff; }
    .field { margin-bottom: 12px; }
    button { width: 100%; padding: 11px; font-weight: 700; cursor: pointer; border:none; border-radius: 8px; background:#2563eb; color:white; font-size: 14px; transition: background .15s, transform .08s; }
    button:hover { background:#1d4ed8; }
    button:active { transform: translateY(1px); }
    button:disabled { background:#9ca3af; cursor: not-allowed; transform:none; }
    .progress-row { display: flex; align-items: center; gap: 8px; margin-top: 10px; }
    .spinner { width: 18px; height: 18px; border: 3px solid #dbeafe; border-top-color: #2563eb; border-radius: 50%; animation: spin 0.8s linear infinite; display: none; }
    .spinner.show { display: inline-block; }
    .progress { font-size: 13px; font-weight: 700; color:#111827; }
    .status { margin-top: 6px; font-size: 12px; color:#4b5563; min-height: 18px; white-space: pre-line; }
    .toggle-row { display: flex; align-items: center; gap: 8px; }
    .switch { position: relative; display: inline-block; width: 42px; height: 22px; }
    .switch input { opacity: 0; width: 0; height: 0; }
    .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #d1d5db; transition: .2s; border-radius: 999px; }
    .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 2px; bottom: 2px; background: #fff; transition: .2s; border-radius: 50%; box-shadow: 0 1px 3px rgba(0,0,0,0.15); }
    .switch input:checked + .slider { background: #2563eb; }
    .switch input:checked + .slider:before { transform: translateX(20px); }
    .mode-label { font-size: 12px; font-weight: 700; color: #1f2933; }
    .tooltip { position: relative; display: inline-flex; align-items: center; }
    .tooltip-icon { width: 18px; height: 18px; border-radius: 50%; background: #e5e7eb; color: #111827; font-size: 12px; font-weight: 700; display: inline-flex; align-items: center; justify-content: center; cursor: default; }
    .tooltip-content { position: absolute; top: 110%; left: 0; transform: translateX(0); background: #111827; color: #f9fafb; padding: 10px; border-radius: 8px; font-size: 12px; line-height: 1.4; box-shadow: 0 10px 30px rgba(0,0,0,0.18); width: 260px; opacity: 0; pointer-events: none; transition: opacity .15s ease; z-index: 10; }
    .tooltip:hover .tooltip-content { opacity: 1; pointer-events: auto; }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>
<body>
  <h1>Gemini 이미지 번역</h1>
  <div class="card">
    <div class="field">
      <label for="apiKey">Gemini API 키</label>
      <input id="apiKey" type="password" placeholder="AIza..." autocomplete="off">
    </div>
    <div class="field">
      <label for="folder">이미지 폴더 선택</label>
      <input id="folder" type="file" webkitdirectory multiple accept="image/*">
    </div>
    <div class="field">
      <label for="saverMode">모드 선택</label>
      <div class="toggle-row">
        <label class="switch">
          <input id="saverMode" type="checkbox">
          <span class="slider"></span>
        </label>
        <span class="mode-label" id="modeLabel">일반</span>
        <div class="tooltip">
          <span class="tooltip-icon">?</span>
          <div class="tooltip-content">
            <strong>일반모드</strong>: 장당 0.134$, 최고 화질<br>
            <strong>절약모드</strong>: 평균 장당 0.05$, 안정적인 가격과 중간화질
          </div>
        </div>
      </div>
    </div>
    <button id="run">실행</button>
    <div class="progress-row">
      <div class="spinner" id="spinner"></div>
      <div class="progress" id="progress">대기 중</div>
    </div>
    <div class="status" id="status"></div>
  </div>

  <script type="module" src="popup.js"></script>
</body>
</html>

